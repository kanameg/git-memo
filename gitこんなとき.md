# Git困ったとき

Gitを使っていて通常に編集や動作確認をしているときは困らないが、「あ!!」といって困るのは主に以下のとき。

* うぁ!この変更だめだ、編集したファイルを戻したい
* ファイル変更中だから、ブランチをチェンジできない
* コミットしたときにしくった
* Push、Pullしたら差分がぁ


## Gitの基本的な考え
いろいろGitを使って操作をする前に、Gitのレポジトリの構成について知っておく必要があります。この構成を理解していないとファイルを編集したりコマンドを実行した場合にどこのデータが編集や変更されるのかがわからなくなります。
Gitにはレポジトリに含まれている過去のコミットツリーとは別に、編集中のファイルが保存されているワークツリーとコミット前のデータが保存されるインデックスで構成されています。




## うぁ!この変更だめだ、編集したファイルを戻したい
いろいろ編集してたたらわけわかんなくなって戻したい場合ファイルを戻したい場合はよくある。
単純に最終のコミットの状態に戻したい場合は`checkout`でファイルを戻すことが可能

```
$ git checkout <戻したいファイル名>
```

コマンドの結果を見るとわかるが`checkout`はインデックスの状態に戻すため、`add`してしまっている状態だと戻すことができない。そのときは一度`reset`で`add`をキャンセルして`checkout`を実行すれば良い。
もしくは、コミットを指定して`checkout`であれば一発で戻すこともできる。

```
$ git reset <戻したいファイル名>
$ git checkout <戻したいファイル名>

$ git checkout HEAD <戻したいファイル名>
```

これ以外にファイルを戻したいという状態はあまりないと思う。`HEAD^`などを指定してコミット前に戻すことはできるが、あまり使わない気がする。


## ブランチをチェンジしようとしたら

ブランチをチェンジしようとしたらよくあるのが

